/* Copyright: Ankitects Pty Ltd and contributors
 * License: GNU AGPL, version 3 or later; http://www.gnu.org/licenses/agpl.html */
@use "../../../../../ts/lib/sass/root-vars";
@use "../../../../../ts/lib/sass/vars" as *;
@use "../../../../../ts/lib/sass/card-counts";
@use "../../../../../ts/lib/sass/elevation" as *;

/* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 * Modern Enhanced Deck Browser Theme
 * ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */

:root {
    --deck-primary: #2563eb;
    --deck-secondary: #3b82f6;
    --deck-success: #16a34a;
    --deck-warning: #f59e0b;
    --deck-new: #2563eb;
    --deck-gradient: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
}

body {
    margin: 2em 1em 1em 1em;
    -webkit-user-select: none;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
    background: var(--canvas);
}

table {
    padding: 1.5rem;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;

    .fancy & {
        border: 2px solid var(--border-subtle);
        border-radius: 16px;
        @include elevation(1, $opacity-boost: -0.08);
        
        &:hover {
            @include elevation(3);
            border-color: var(--deck-primary);
        }
        
        background: var(--canvas-glass);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
}

/* Header Styling */
th {
    border-bottom: 2px solid var(--deck-primary);
    padding: 12px 16px;
    font-weight: 700;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--deck-primary);
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.05) 0%, rgba(59, 130, 246, 0.03) 100%);
}

/* Deck Links */
a.deck {
    color: color(fg);
    text-decoration: none;
    min-width: 5em;
    display: inline-block;
    font-weight: 600;
    font-size: 1.05rem;
    transition: all 0.2s ease;
    padding: 4px 0;
    
    &:hover {
        color: var(--deck-primary);
        transform: translateX(4px);
    }
}

/* Deck Rows */
tr.deck td {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-subtle);
    transition: all 0.3s ease;

    .fancy & {
        border: unset;
        padding: 12px 16px;
    }
}

tr.top-level-drag-row td {
    border-bottom: 1px solid transparent;
}

td {
    white-space: nowrap;
}

tr.drag-hover td {
    border-bottom: 1px solid color(border);
}

body {
    margin: 2em 1em 1em 1em;
    -webkit-user-select: none;
}

/* Hover and Current Deck Effects */
.current,
tr:hover:not(.top-level-drag-row) {
    td {
        background: linear-gradient(90deg, rgba(37, 99, 235, 0.08) 0%, rgba(59, 130, 246, 0.05) 100%);
        transform: translateX(2px);
        
        &:first-child {
            border-top-left-radius: 12px;
            border-bottom-left-radius: 12px;
        }
        &:last-child {
            border-top-right-radius: 12px;
            border-bottom-right-radius: 12px;
        }
        .gears {
            visibility: visible;
            opacity: 1;
        }
    }
}
[dir="rtl"] {
    .current,
    tr:hover:not(.top-level-drag-row) {
        td {
            background: color(canvas-inset);
            &:first-child {
                border-top-left-radius: 0;
                border-bottom-left-radius: 0;
                border-top-right-radius: prop(border-radius-medium);
                border-bottom-right-radius: prop(border-radius-medium);
            }
            &:last-child {
                border-top-right-radius: 0;
                border-bottom-right-radius: 0;
                border-top-left-radius: prop(border-radius-medium);
                border-bottom-left-radius: prop(border-radius-medium);
            }
        }
    }
}

.decktd {
    min-width: 15em;
    max-width: calc(100vw - 300px);
    overflow: hidden;
}

/* Card Counts - Enhanced Styling */
.count {
    min-width: 4em;
    text-align: right;
    font-weight: 700;
    font-size: 1.1rem;
}

.new-count {
    color: var(--deck-new);
    background: rgba(37, 99, 235, 0.1);
    padding: 4px 10px;
    border-radius: 8px;
    display: inline-block;
    min-width: 32px;
    text-align: center;
}

.learn-count {
    color: var(--deck-warning);
    background: rgba(245, 158, 11, 0.1);
    padding: 4px 10px;
    border-radius: 8px;
    display: inline-block;
    min-width: 32px;
    text-align: center;
}

.review-count {
    color: var(--deck-success);
    background: rgba(22, 163, 74, 0.1);
    padding: 4px 10px;
    border-radius: 8px;
    display: inline-block;
    min-width: 32px;
    text-align: center;
}

.zero-count {
    opacity: 0.3;
    font-weight: 400;
}

.optscol {
    width: 2em;
}

.collapse {
    color: color(fg);
    text-decoration: none;
    display: inline-block;
    width: 1em;
}

.filtered {
    color: color(fg-link) !important;
}

.gears {
    width: 1em;
    height: 1em;
    opacity: 0.5;
    padding-top: 0.2em;
    cursor: pointer;
    visibility: hidden;
}

.nightMode {
    .gears {
        filter: invert(180);
    }
}

.callout {
    background: color(border);
    padding: 1em;
    margin: 1em;

    div {
        margin: 1em;
    }
}

#studiedToday {
    margin: 2em 0;
}
